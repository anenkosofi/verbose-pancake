window.addEventListener("load",(function(){document.body.style.overflow="hidden";const e=document.querySelector(".loader");setTimeout((function(){e.classList.add("is-hidden"),document.body.style.overflow="visible"}),5e3)}));const e=document.querySelector(".backdrop"),t=document.querySelector(".modal");let n=null,o=null;function r(){n=setTimeout((function(){t.insertAdjacentHTML("beforeend",'<p class="modal__description">Are you still here?</p>\n    <button type="button" class="primary-button modal__button">Confirm</button>'),e.classList.remove("is-hidden"),document.body.style.overflow="hidden";document.querySelector(".modal__button").addEventListener("click",s),o=setTimeout((()=>{window.close()}),1e4)}),6e4)}function s(){clearTimeout(o),clearTimeout(n),e.classList.add("is-hidden"),t.innerHTML="",document.body.style.overflow="visible",r()}r(),document.addEventListener("mousemove",(function(){clearTimeout(n),r()})),document.addEventListener("keydown",(function(){clearTimeout(n),r()}));const i=document.querySelector(".header__progress");window.addEventListener("scroll",(function(){const e=window.innerHeight,t=document.body.clientHeight,n=window.scrollY/(t-e)*100;i.style.width=`${n}%`}));const c=document.querySelector(".service__filters-list"),a=document.querySelector(".service__list");function l(){return fetch("https://64be73b75ee688b6250c6d71.mockapi.io/design").then((e=>{if(!e.ok)throw new Error(e.status);return e.json()}))}function d(e){const t=new Map;for(const n of e)t.set(n.category,n);return Array.from(t.values())}function u(e){const t=e.map((({title:e,description:t})=>`<li class="service__item">\n        <div class="service__content">\n          <h3 class="service__post-heading">${e}</h3>\n          <p class="service__description">\n            ${t}\n          </p>\n        </div>\n      </li>`)).join("");a.innerHTML=t}c.addEventListener("click",(function(e){const t=e.target.closest("li");if(!t)return;if(t)if(t.classList.contains("service__filters-item_active"))t.classList.contains("service__filters-item_active")&&(Array.from(c.children).forEach((e=>e.classList.remove("service__filters-item_active"))),l().then((e=>{t.classList.remove("service__filters-item_active"),c.children[0].classList.add("service__filters-item_active");u(d(e))})).catch((e=>console.log(e))));else{Array.from(c.children).forEach((e=>e.classList.remove("service__filters-item_active")));const e=t.dataset.id.toLowerCase();t.classList.add("service__filters-item_active"),"all"!==e?function(e){return fetch(`https://64be73b75ee688b6250c6d71.mockapi.io/design?category=${e}`).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()}))}(e).then((e=>u(e))).catch((e=>console.log(e))):l().then((e=>{u(d(e))})).catch((e=>console.log(e)))}})),l().then((e=>{!function(e){const t=[...new Set(e.map((({category:e})=>e)))].map((e=>`<li class="service__filters-item" data-id="${e}">\n          ${e}\n        </li>`)).join("");c.insertAdjacentHTML("beforeend",t)}(e),u(d(e))})).catch((e=>console.log(e))),new Swiper(".testimonials__comments",{loop:!0,spaceBetween:180,grabCursor:!0,slidesPerView:2,slidesPerGroup:2,navigation:{nextEl:".testimonials__button_right",prevEl:".testimonials__button_left"}});const m=document.querySelector(".news"),f=document.querySelectorAll(".news__item");new IntersectionObserver((function(e,t){e.forEach((e=>{Array.from(f).map((t=>e.isIntersecting?t.style.opacity=1:t.style.opacity=0))}))}),{root:null,rootMargin:"400px",threshold:1}).observe(m);const _=document.querySelector(".sign-up__form"),h=document.querySelector(".backdrop"),v=document.querySelector(".modal"),y=document.querySelector("#name-error"),p=document.querySelector("#surname-error"),w=document.querySelector("#email-error"),g=/^[A-Z][a-zA-Z]*$/,b=/^[\w\.-]+@[a-zA-Z\d\.-]+\.[a-zA-Z]{2,}$/,L="Name must start with an uppercase letter and contain only Latin letters and no spaces",S="Surname must start with an uppercase letter and contain only Latin letters and no spaces",q={name:"",surname:"",email:""};_.addEventListener("input",(function(e){const t=e.target,n=t.name,o=t.value;q[n]=o,function(e,t){const n=document.querySelector(`#${e}-error`);let o="";t.length?"name"!==e||g.test(t)?"surname"!==e||g.test(t)?"email"!==e||b.test(t)||(o="Invalid email format."):o=S:o=L:o="This field is required";n.textContent=o}(n,o)})),_.addEventListener("submit",(function(e){e.preventDefault();const t={name:"",surname:"",email:""},n=q.name,o=q.surname,r=q.email,s=n.length&&g.test(n),i=o.length&&g.test(o),c=r.length&&b.test(r);t.name=s?"":L,t.surname=i?"":S,t.email=c?"":"Invalid email format.";s&&i&&c?(localStorage.setItem("formValues",JSON.stringify(q)),e.target.reset(),"Sigma"===q.name&&function(){const e=function(){const e=new Date,t=e.getDate().toString().padStart(2,"0"),n=(e.getMonth()+1).toString().padStart(2,"0"),o=e.getFullYear();return`${n}.${t}.${o}`}(),t=`<h1 class="modal__heading">Hello, ${q.name}!</h1>\n    <p class="modal__description">Today ${e}, for users with your name, there's a 120% discount when placing an order!</p>`;v.insertAdjacentHTML("beforeend",t),document.body.style.overflow="hidden",h.classList.remove("is-hidden"),setTimeout((()=>{h.classList.add("is-hidden"),document.body.style.overflow="visible",v.innerHTML=""}),5e3)}()):(y.textContent=t.name,p.textContent=t.surname,w.textContent=t.email)}));const T=document.querySelector("#time"),E=(new Date).getFullYear();T.innerHTML=E;
//# sourceMappingURL=index.fa915822.js.map
